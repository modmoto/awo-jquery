<!doctype html>
<html>
    <head>
        <title>
            Simons Webseite
        </title>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

        <style>
            .kommentare {
                background-color: aquamarine;
                margin: 10px;
                padding: 20px;
            }

            .green {
                background-color: green;
            }

            .red {
                background-color: red;
            }

        </style>

        <script>
            $('document').ready(() => {
                let meinButton = $('#mein-button')
                let kommentarContainer = $('#kommentar-container')
                let counterContainer = $('#counter')
                let textField = $('#text-field')
                let nameField = $('#name-field')
                let playButton = $('#play-button')
                let volumeUpButton = $('#volume-up-button')
                let volumeDownButton = $('#volume-down-button')
                
                let kommentarWurdeGeadded = false
                let counter = 0

                let audioFile = new Audio('cena.mp3')
                let audioIsPlaying = false
                audioFile.volume = 0.5

                playButton.click(() => {
                    if (audioIsPlaying) {
                        audioFile.pause()
                        audioFile.currentTime = 0
                        audioIsPlaying = false
                    } else {
                        audioFile.play()
                        audioIsPlaying = true
                    }
                })

                volumeUpButton.click(() => {
                    audioFile.volume += 0.1
                })

                volumeDownButton.click(() => {
                    audioFile.volume -= 0.1
                })

                meinButton.click(() => {
                    counter = counter + 1
                    let aktuellerText = textField.val()
                    let aktuellerName = nameField.val()

                    if(counter > 5) {
                        counterContainer.removeClass('green')
                        counterContainer.addClass('red')
                    }

                    if (!kommentarWurdeGeadded) {
                        kommentarContainer.empty()
                        kommentarWurdeGeadded = true
                    }

                    kommentarContainer.append(`
                    <div class="kommentare">
                        ${aktuellerName} hat geschrieben: ${aktuellerText} <button>l√∂schen</button>
                    </div>`)
                    counterContainer.text(`Kommentare: ${counter}`)
                })
            })
            
        </script>
    </head>
    <body>
        <div>
            <span>Name:</span>
            <input type="text" id="name-field">
        </div>
        <div>
            <span>Kommentar:</span>
            <input type="text" id="text-field">
        </div>

        <button id="mein-button">
            Adde Kommentar
        </button>

        <button id="play-button">
            Play/Stop Musik
        </button>

        <button id="volume-down-button">
            -
        </button>

        <button id="volume-up-button">
            +
        </button>

        <div id="counter" class="green">
            Kommentare: 0
        </div>

        <div id="kommentar-container">
            keine Kommentare bis jetzt
        </div>

    </body>
</html>